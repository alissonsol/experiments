<!-- Copyright (c) 2025 - Alisson Sol -->
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ordem</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div id="loader" aria-hidden="true">
    <span class="loader-text">Ordem</span>
  </div>
  <div id="app"></div>
  <script type="module" src="bundle.js"></script>
  <script>
    (function() {
      const loader = document.getElementById('loader');
      const text = loader?.querySelector('.loader-text');
      if (!loader || !text) return;

      const DURATION = 60000;
      const ROTATIONS = 6;
      let startTime = null;

      const getMaxRadius = () => {
        const { innerWidth: vw, innerHeight: vh } = window;
        const rect = text.getBoundingClientRect();
        const margin = 8;
        const maxX = vw / 2 - rect.width / 2 - margin;
        const maxY = vh / 2 - rect.height / 2 - margin;
        return Math.max(0, Math.min(maxX, maxY));
      };

      const isLoaderHidden = () => {
        if (!document.body.contains(loader) || loader.classList.contains('fade-out')) return true;
        const s = window.getComputedStyle(loader);
        return s.display === 'none' || s.visibility === 'hidden' || s.opacity === '0';
      };

      const step = (ts) => {
        if (!startTime) startTime = ts;
        const elapsed = ts - startTime;
        const frac = Math.min(elapsed, DURATION) / DURATION;

        const maxR = getMaxRadius();
        const theta = frac * ROTATIONS * Math.PI * 2;
        const x = frac * maxR * Math.cos(theta);
        const y = frac * maxR * Math.sin(theta);

        text.style.transform = `translate(-50%,-50%) translate(${x}px, ${y}px)`;

        if (isLoaderHidden()) {
          text.style.transform = 'translate(-50%,-50%)';
          return;
        }

        if (elapsed >= DURATION) startTime = ts;
        requestAnimationFrame(step);
      };

      text.style.willChange = 'transform';
      requestAnimationFrame(step);
      window.addEventListener('resize', () => { startTime = null; });
    })();
  </script>
</body>

</html>